{"version":3,"sources":["../../src/schemas/json-schema.ts","../../src/tools/generic.ts"],"names":[],"mappings":"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","file":"generic.js","sourcesContent":["/**\n * JSON Schema type definition (simplified for our needs)\n */\nexport interface JSONSchema {\n  type: string;\n  description?: string;\n  properties?: Record<string, JSONSchema>;\n  required?: string[];\n  additionalProperties?: boolean;\n  items?: JSONSchema;\n  enum?: string[];\n}\n\n/**\n * JSON Schema for bashlet_exec tool input\n */\nexport const execJsonSchema: JSONSchema = {\n  type: \"object\",\n  properties: {\n    command: {\n      type: \"string\",\n      description: \"The shell command to execute in the sandbox\",\n    },\n    workdir: {\n      type: \"string\",\n      description: \"Working directory inside the sandbox (default: /workspace)\",\n    },\n  },\n  required: [\"command\"],\n  additionalProperties: false,\n};\n\n/**\n * JSON Schema for bashlet_read_file tool input\n */\nexport const readFileJsonSchema: JSONSchema = {\n  type: \"object\",\n  properties: {\n    path: {\n      type: \"string\",\n      description: \"Absolute path to the file inside the sandbox\",\n    },\n  },\n  required: [\"path\"],\n  additionalProperties: false,\n};\n\n/**\n * JSON Schema for bashlet_write_file tool input\n */\nexport const writeFileJsonSchema: JSONSchema = {\n  type: \"object\",\n  properties: {\n    path: {\n      type: \"string\",\n      description: \"Absolute path to the file inside the sandbox\",\n    },\n    content: {\n      type: \"string\",\n      description: \"Content to write to the file\",\n    },\n  },\n  required: [\"path\", \"content\"],\n  additionalProperties: false,\n};\n\n/**\n * JSON Schema for bashlet_list_dir tool input\n */\nexport const listDirJsonSchema: JSONSchema = {\n  type: \"object\",\n  properties: {\n    path: {\n      type: \"string\",\n      description: \"Absolute path to the directory inside the sandbox\",\n    },\n  },\n  required: [\"path\"],\n  additionalProperties: false,\n};\n","import type { Bashlet } from \"../client.js\";\nimport {\n  execJsonSchema,\n  readFileJsonSchema,\n  writeFileJsonSchema,\n  listDirJsonSchema,\n  type JSONSchema,\n} from \"../schemas/json-schema.js\";\n\n/**\n * Generic tool definition that can be adapted to any AI framework.\n */\nexport interface GenericTool<TInput = Record<string, unknown>, TOutput = unknown> {\n  /** Tool name */\n  name: string;\n  /** Human-readable description */\n  description: string;\n  /** JSON Schema for input parameters */\n  parameters: JSONSchema;\n  /** Execute the tool with given arguments */\n  execute: (args: TInput) => Promise<TOutput>;\n}\n\n/**\n * Input types for generic tools\n */\nexport interface ExecArgs {\n  command: string;\n  workdir?: string;\n}\n\nexport interface ReadFileArgs {\n  path: string;\n}\n\nexport interface WriteFileArgs {\n  path: string;\n  content: string;\n}\n\nexport interface ListDirArgs {\n  path: string;\n}\n\n/**\n * Output types for generic tools\n */\nexport interface ExecResult {\n  stdout: string;\n  stderr: string;\n  exitCode: number;\n}\n\nexport interface WriteFileResult {\n  success: boolean;\n  path: string;\n}\n\n/**\n * Generate framework-agnostic tool definitions.\n *\n * These tools can be adapted to work with any AI agent framework\n * by using the JSON Schema parameters and execute function.\n *\n * @param client - Bashlet client instance\n * @returns Array of generic tool definitions\n *\n * @example\n * ```typescript\n * import { Bashlet, generateGenericTools } from '@bashlet/sdk';\n *\n * const bashlet = new Bashlet();\n * const tools = generateGenericTools(bashlet);\n *\n * // Use with any custom AI agent implementation\n * for (const tool of tools) {\n *   console.log(`Tool: ${tool.name}`);\n *   console.log(`Description: ${tool.description}`);\n *   console.log(`Parameters: ${JSON.stringify(tool.parameters)}`);\n *\n *   // Execute the tool\n *   const result = await tool.execute({ command: 'ls' });\n * }\n * ```\n */\nexport function generateGenericTools(client: Bashlet): GenericTool[] {\n  return [\n    {\n      name: \"bashlet_exec\",\n      description:\n        \"Execute a shell command in a sandboxed bash environment. \" +\n        \"Returns stdout, stderr, and exit code. \" +\n        \"Use this for running shell commands, scripts, and system operations safely.\",\n      parameters: execJsonSchema,\n      execute: async (args): Promise<ExecResult> => {\n        const { command, workdir } = args as unknown as ExecArgs;\n        const result = await client.exec(command, { workdir });\n        return {\n          stdout: result.stdout,\n          stderr: result.stderr,\n          exitCode: result.exitCode,\n        };\n      },\n    },\n    {\n      name: \"bashlet_read_file\",\n      description:\n        \"Read the contents of a file from the sandboxed environment. \" +\n        \"Returns the file content as a string.\",\n      parameters: readFileJsonSchema,\n      execute: async (args): Promise<string> => {\n        const { path } = args as unknown as ReadFileArgs;\n        return await client.readFile(path);\n      },\n    },\n    {\n      name: \"bashlet_write_file\",\n      description:\n        \"Write content to a file in the sandboxed environment. \" +\n        \"Creates the file if it doesn't exist, overwrites if it does.\",\n      parameters: writeFileJsonSchema,\n      execute: async (args): Promise<WriteFileResult> => {\n        const { path, content } = args as unknown as WriteFileArgs;\n        await client.writeFile(path, content);\n        return { success: true, path };\n      },\n    },\n    {\n      name: \"bashlet_list_dir\",\n      description:\n        \"List the contents of a directory in the sandboxed environment. \" +\n        \"Returns a detailed listing with file permissions, sizes, and names.\",\n      parameters: listDirJsonSchema,\n      execute: async (args): Promise<string> => {\n        const { path } = args as unknown as ListDirArgs;\n        return await client.listDir(path);\n      },\n    },\n  ];\n}\n\n/**\n * Create a tool registry for looking up and executing tools by name.\n *\n * @param client - Bashlet client instance\n * @returns Object with tools map and execute helper\n *\n * @example\n * ```typescript\n * const registry = createToolRegistry(bashlet);\n *\n * // Get tool by name\n * const execTool = registry.get('bashlet_exec');\n *\n * // Execute tool by name\n * const result = await registry.execute('bashlet_exec', { command: 'ls' });\n * ```\n */\nexport function createToolRegistry(client: Bashlet) {\n  const tools = generateGenericTools(client);\n  const toolMap = new Map(tools.map((t) => [t.name, t]));\n\n  return {\n    /** Get all tools as an array */\n    all: () => tools,\n\n    /** Get a tool by name */\n    get: (name: string) => toolMap.get(name),\n\n    /** Check if a tool exists */\n    has: (name: string) => toolMap.has(name),\n\n    /** Execute a tool by name */\n    execute: async (name: string, args: Record<string, unknown>) => {\n      const tool = toolMap.get(name);\n      if (!tool) {\n        throw new Error(`Unknown tool: ${name}`);\n      }\n      return tool.execute(args);\n    },\n\n    /** Get tool names */\n    names: () => Array.from(toolMap.keys()),\n  };\n}\n"]}