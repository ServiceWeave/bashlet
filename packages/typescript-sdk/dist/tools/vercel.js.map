{"version":3,"sources":["../../src/schemas/zod.ts","../../src/tools/vercel.ts"],"names":[],"mappings":";;;AAKO,IAAM,UAAA,GAAa,EAAE,MAAA,CAAO;AAAA,EACjC,OAAA,EAAS,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,6CAA6C,CAAA;AAAA,EAC1E,SAAS,CAAA,CACN,MAAA,GACA,QAAA,EAAS,CACT,SAAS,4DAA4D;AAC1E,CAAC,CAAA;AAKM,IAAM,cAAA,GAAiB,EAAE,MAAA,CAAO;AAAA,EACrC,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,8CAA8C;AAC1E,CAAC,CAAA;AAKM,IAAM,eAAA,GAAkB,EAAE,MAAA,CAAO;AAAA,EACtC,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,8CAA8C,CAAA;AAAA,EACxE,OAAA,EAAS,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,8BAA8B;AAC7D,CAAC,CAAA;AAKM,IAAM,aAAA,GAAgB,EAAE,MAAA,CAAO;AAAA,EACpC,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,mDAAmD;AAC/E,CAAC,CAAA;;;ACwDM,SAAS,oBAAoB,MAAA,EAAqC;AACvE,EAAA,OAAO;AAAA,IACL,YAAA,EAAc;AAAA,MACZ,WAAA,EACE,6KAAA;AAAA,MAGF,UAAA,EAAY,UAAA;AAAA,MACZ,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,SAAQ,KAAsC;AACvE,QAAA,MAAM,SAAS,MAAM,MAAA,CAAO,KAAK,OAAA,EAAS,EAAE,SAAS,CAAA;AACrD,QAAA,OAAO;AAAA,UACL,QAAQ,MAAA,CAAO,MAAA;AAAA,UACf,QAAQ,MAAA,CAAO,MAAA;AAAA,UACf,UAAU,MAAA,CAAO;AAAA,SACnB;AAAA,MACF;AAAA,KACF;AAAA,IAEA,iBAAA,EAAmB;AAAA,MACjB,WAAA,EACE,mGAAA;AAAA,MAEF,UAAA,EAAY,cAAA;AAAA,MACZ,OAAA,EAAS,OAAO,EAAE,IAAA,EAAK,KAA8C;AACnE,QAAA,MAAM,OAAA,GAAU,MAAM,MAAA,CAAO,QAAA,CAAS,IAAI,CAAA;AAC1C,QAAA,OAAO,EAAE,OAAA,EAAQ;AAAA,MACnB;AAAA,KACF;AAAA,IAEA,kBAAA,EAAoB;AAAA,MAClB,WAAA,EACE,oHAAA;AAAA,MAEF,UAAA,EAAY,eAAA;AAAA,MACZ,OAAA,EAAS,OAAO,EAAE,IAAA,EAAM,SAAQ,KAAgD;AAC9E,QAAA,MAAM,MAAA,CAAO,SAAA,CAAU,IAAA,EAAM,OAAO,CAAA;AACpC,QAAA,OAAO,EAAE,OAAA,EAAS,IAAA,EAAM,IAAA,EAAK;AAAA,MAC/B;AAAA,KACF;AAAA,IAEA,gBAAA,EAAkB;AAAA,MAChB,WAAA,EACE,oIAAA;AAAA,MAEF,UAAA,EAAY,aAAA;AAAA,MACZ,OAAA,EAAS,OAAO,EAAE,IAAA,EAAK,KAA4C;AACjE,QAAA,MAAM,OAAA,GAAU,MAAM,MAAA,CAAO,OAAA,CAAQ,IAAI,CAAA;AACzC,QAAA,OAAO,EAAE,OAAA,EAAQ;AAAA,MACnB;AAAA;AACF,GACF;AACF","file":"vercel.js","sourcesContent":["import { z } from \"zod\";\n\n/**\n * Schema for bashlet_exec tool input\n */\nexport const execSchema = z.object({\n  command: z.string().describe(\"The shell command to execute in the sandbox\"),\n  workdir: z\n    .string()\n    .optional()\n    .describe(\"Working directory inside the sandbox (default: /workspace)\"),\n});\n\n/**\n * Schema for bashlet_read_file tool input\n */\nexport const readFileSchema = z.object({\n  path: z.string().describe(\"Absolute path to the file inside the sandbox\"),\n});\n\n/**\n * Schema for bashlet_write_file tool input\n */\nexport const writeFileSchema = z.object({\n  path: z.string().describe(\"Absolute path to the file inside the sandbox\"),\n  content: z.string().describe(\"Content to write to the file\"),\n});\n\n/**\n * Schema for bashlet_list_dir tool input\n */\nexport const listDirSchema = z.object({\n  path: z.string().describe(\"Absolute path to the directory inside the sandbox\"),\n});\n\n// Type exports for TypeScript inference\nexport type ExecInput = z.infer<typeof execSchema>;\nexport type ReadFileInput = z.infer<typeof readFileSchema>;\nexport type WriteFileInput = z.infer<typeof writeFileSchema>;\nexport type ListDirInput = z.infer<typeof listDirSchema>;\n","import type { Bashlet } from \"../client.js\";\nimport {\n  execSchema,\n  readFileSchema,\n  writeFileSchema,\n  listDirSchema,\n  type ExecInput,\n  type ReadFileInput,\n  type WriteFileInput,\n  type ListDirInput,\n} from \"../schemas/zod.js\";\n\n/**\n * Vercel AI SDK tool structure\n * Compatible with the `tool()` helper from the `ai` package\n */\nexport interface VercelTool<TInput, TOutput> {\n  description: string;\n  parameters: typeof execSchema | typeof readFileSchema | typeof writeFileSchema | typeof listDirSchema;\n  execute: (args: TInput) => Promise<TOutput>;\n}\n\n/**\n * Exec tool output type\n */\nexport interface ExecOutput {\n  stdout: string;\n  stderr: string;\n  exitCode: number;\n}\n\n/**\n * Read file output type\n */\nexport interface ReadFileOutput {\n  content: string;\n}\n\n/**\n * Write file output type\n */\nexport interface WriteFileOutput {\n  success: boolean;\n  path: string;\n}\n\n/**\n * List directory output type\n */\nexport interface ListDirOutput {\n  listing: string;\n}\n\n/**\n * Tools record type for Vercel AI SDK\n */\nexport interface BashletVercelTools {\n  bashlet_exec: VercelTool<ExecInput, ExecOutput>;\n  bashlet_read_file: VercelTool<ReadFileInput, ReadFileOutput>;\n  bashlet_write_file: VercelTool<WriteFileInput, WriteFileOutput>;\n  bashlet_list_dir: VercelTool<ListDirInput, ListDirOutput>;\n}\n\n/**\n * Generate Vercel AI SDK-compatible tools.\n *\n * These tools are designed to work with the `ai` package's `generateText`\n * and `streamText` functions.\n *\n * @param client - Bashlet client instance\n * @returns Object with tool definitions\n *\n * @example\n * ```typescript\n * import { generateText } from 'ai';\n * import { openai } from '@ai-sdk/openai';\n * import { Bashlet, generateVercelTools } from '@bashlet/sdk';\n *\n * const bashlet = new Bashlet({\n *   mounts: [{ hostPath: './project', guestPath: '/workspace' }],\n * });\n *\n * const result = await generateText({\n *   model: openai('gpt-4-turbo'),\n *   tools: generateVercelTools(bashlet),\n *   prompt: 'List files in /workspace and show the contents of package.json',\n * });\n * ```\n */\nexport function generateVercelTools(client: Bashlet): BashletVercelTools {\n  return {\n    bashlet_exec: {\n      description:\n        \"Execute a shell command in a sandboxed bash environment. \" +\n        \"Returns stdout, stderr, and exit code. \" +\n        \"Use this for running shell commands, scripts, and system operations safely.\",\n      parameters: execSchema,\n      execute: async ({ command, workdir }: ExecInput): Promise<ExecOutput> => {\n        const result = await client.exec(command, { workdir });\n        return {\n          stdout: result.stdout,\n          stderr: result.stderr,\n          exitCode: result.exitCode,\n        };\n      },\n    },\n\n    bashlet_read_file: {\n      description:\n        \"Read the contents of a file from the sandboxed environment. \" +\n        \"Returns the file content as a string.\",\n      parameters: readFileSchema,\n      execute: async ({ path }: ReadFileInput): Promise<ReadFileOutput> => {\n        const content = await client.readFile(path);\n        return { content };\n      },\n    },\n\n    bashlet_write_file: {\n      description:\n        \"Write content to a file in the sandboxed environment. \" +\n        \"Creates the file if it doesn't exist, overwrites if it does.\",\n      parameters: writeFileSchema,\n      execute: async ({ path, content }: WriteFileInput): Promise<WriteFileOutput> => {\n        await client.writeFile(path, content);\n        return { success: true, path };\n      },\n    },\n\n    bashlet_list_dir: {\n      description:\n        \"List the contents of a directory in the sandboxed environment. \" +\n        \"Returns a detailed listing with file permissions, sizes, and names.\",\n      parameters: listDirSchema,\n      execute: async ({ path }: ListDirInput): Promise<ListDirOutput> => {\n        const listing = await client.listDir(path);\n        return { listing };\n      },\n    },\n  };\n}\n"]}